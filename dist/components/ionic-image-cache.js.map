{"version":3,"file":"ionic-image-cache.js","sourceRoot":"","sources":["../../src/components/ionic-image-cache.ts"],"names":[],"mappings":"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","sourcesContent":["import { IonicImageCacheConfig } from '../providers/ionic-image-cache-config';\nimport { Component, Input, Output, NgZone, EventEmitter, ViewChild, ElementRef, ViewEncapsulation } from '@angular/core';\nimport { IonicImageCacheHelperProvider } from '../providers/ionic-image-cache-fileprocessor';\nimport { Platform } from 'ionic-angular';\nimport { FileEntry, RemoveResult, DirectoryEntry } from '@ionic-native/file';\nimport { ImageViewerController } from 'ionic-img-viewer';\n\n@Component({\n  selector: 'ionic-image-cache',\n  template: `\n  <div class=\"ionic-image-cache-prelative ionic-image-cache-container\">\n    <div *ngIf=\"((!srcUrl) && this.imageCacheConfig.spinnerEnabled)\" text-center class=\"ionic-image-cache-absolute-center ionic-image-cache-progress-div\">\n      <ion-spinner [color]=\"spinnerColorString\" [name]=\"spinnerNameString\"></ion-spinner>\n    </div>\n    <img #realImage *ngIf=\"srcUrl\" [src]=\"srcUrl\" [alt]=\"altString\" class=\"{{imgCssClass}}\" (click)=\"presentImage($event, realImage)\" />\n    <img *ngIf=\"!srcUrl\" [src]=\"fallback\">\n  </div>\n`,\n  styles: [\n    `\n  ionic-image-cache .ionic-image-cache-container {\n    min-height: 20px;\n  }\n  ionic-image-cache.img-circle img {\n    border-radius: 50%;\n  }\n  ionic-image-cache.img-thumbnail img {\n    border-radius: 6px;\n  }\n  ionic-image-cache .ionic-image-cache-progress-div {\n    height: 30px;\n  }\n  ionic-image-cache img {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n  }\n  ionic-image-cache img .width100percent {\n    width: 100%;\n  }\n  ionic-image-cache .ionic-image-cache-prelative {\n    position: relative;\n  }\n  ionic-image-cache .ionic-image-cache-absolute-center {\n    margin: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex {\n    display: flex;\n    flex-wrap: wrap;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-valign-center {\n    align-items: center;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-valign-start {\n    align-items: flex-start;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-valign-end {\n    align-items: flex-end;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-halign-center {\n    justify-content: center;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-halign-start {\n    justify-content: flex-start;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.flex-halign-end {\n    justify-content: flex-end;\n  }\n  ionic-image-cache .ionic-image-cache-display-flex.no-wrap {\n    flex-wrap: nowrap;\n  }\n`\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class IonicImageCacheComponent {\n\n  avatarbase64: string = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAABMdJREFUaAXlm1toHFUcxneSZY2NKBUv2OKLVHNZk0AEhXjBENSCRUUflEKV+qDWK1RFii+rL4r4YBBaCiKCYCR5EEEMpangW9CASZbcEBUpZBeUrKA13d1k19+BLoRx53q+2abpwDKZc/7n+3+/OWfuJ87Kyko9dRktbReR9Sy5v63Vau/zO7ixsXF7qVS6hrJckp7SSYq7tP9i++t6vX56c3PzTDabLbrqU8vLy29RlnOXK7cTBwbwFIZPADkJZCXAfDag3ro6MWBAzziOc6y7u/vHsC7L5fKRjo6O3cQfCNsmalwSx/A6Jl4G9IGurq7QsMb4wMDAubm5ucfYWcejgoSNd5RnaYwW6dX9gM6FNeAVt7S09EZbW9sH1DteMXHKZT0M7Bpn2/sUsAakp6fnQzSf5M/zccC82iiBD/b29v7slShOOYfFBDtxP23Lcdo3ayMBpicm6RFzNpYv6H6P6OsqYQkwZk6qDDXTWV1dPWnOD83qopZJgBl2P0RNHCV+eHh4g/ipKG28YhXANY7dglcCYfnvCi0FcNDdk8JniiH9r0LokgFWwBoNa2D2fEt6eNsAc2e1qTLTCh1FD9daYVSVwxoYI5fUGxNrYIb05QXcwh6W7FjrHm4hsOQwtgZW3RAE0aiuBlbAwP7NffSxILOKevL8RL6qrZYVMMlPcR/9la2JMO3JcxrgXJhYvxhb4IyfuLqOYW39uscWeK8aKkBvT0B9YLUt8ABvGTsDs4gC6OCbbKWsgDGQzmQyd9uaiND+4gIbo7xKvd+sk17Gx8fbyXGLbR6rHr6QfMTWRJj2/f39zxB3Q5hYvxgF8J2Li4u3+iVR1HH4vK3QUQCbYf2UwoyXxsLCwl3UWQ9noy8BRucRI5bU0t7e/rhKWwLMcLsjn8/fqDLl1kH/YXdZ3G0JMMmddDptPonIF4ZzFlHzkywq4BS9cEjiyCXCjjzsKrLaVAKP8OlVCj07O7uXB4YjVoSuxjJgo4u5j7jVtL5WNjwyG+AdRs6uxrZiLQXG3LXcar6oMGY00HtQpdXQkQI3RBXr6enpq9G5WaG1VSMJ4NWtCeL+3dnZeWXctn7tti0wd2/WD/vNwOXAnLgkPQxwtZlh2zIpMLAVphD+ZmvKtC8Wi+fQMx/CpYsMGHN5zqr38BhXUjjkq/959J5VQ8uAeY16NOpEtKAdg97nxIwHxUWplwDTCwXeSHwXJXGEWAMtWyTAuJnI5XKJfDYtFApT7NA/VcQSYAx9qTLk1rkwg2fCXR53WwE8xeSx6bgGQrYbJe6PkLG+YXGB6dT6JHOgD4yNjT1EBsmnTC+nTEFcYbb8PnK+RsyiV1yY8kizaUlY4lLxaaVSOdHX1/dLmARJxPBS4F5e+7yAlyfQvyJKjlDAgOYRHV1bW/tiaGjIzIfeFgvP39fh7TDgz2FoXxhTfsA1xL5BZJQhldQlJ4zHMDEOr4pH6HXzaPooP89D9X/AQP5Dg08Yth9z1/RrmGzbKYaJ5bfR42/i6WnWGbe3rcBl7paOr6+vvzc4OCg5I7qTtXKb/5DZA/BROvB51lc1cjtUmKeSz6rV6ruciM42KnbKen5+fjdvYV4C+lWYrk+ZIbBT4Pw4ZmZmdsH6il/Mjqz7D9RWlBEQGS2+AAAAAElFTkSuQmCC`;\n\n  srcUrl: string;\n  imageViewerBigSrcUrl: string;\n  cache_directory_name: string = this.imageCacheConfig.cacheDirectoryName;\n  fallback: string = this.imageCacheConfig.fallbackUrl;\n  altString: string = this.imageCacheConfig.alt;\n  spinnerNameString: string = this.imageCacheConfig.spinnerName;\n  spinnerColorString: string = this.imageCacheConfig.spinnerColor;\n  showPrev: boolean | string = true;\n  @Input(\"imgCssClass\") imgCssClass: string;\n  @ViewChild(\"realImage\") realImage: ElementRef;\n\n  _imageViewerCtrl: ImageViewerController;\n  @Input() set src(value: string) {\n\n    if (!this.platform.is('cordova')) {\n      this.setImageSrc(value);\n      // we are running on a browser, or using livereload\n      // plugin will not function in this case\n\n      this.log('You are running on a browser or using livereload.');\n\n    } else {\n      if (this.helpers.ValidURL(value)) {\n        this.initialise(value);\n      } else {\n        this.setImageSrc(value);\n        this.log(value + ' is not a remote URL');\n      }\n    }\n  }\n\n  @Input(\"clickReturnObj\") clickReturnObj: any;\n\n  get src(): string {\n    return this.srcUrl;\n  }\n\n  @Input() set highResSrc(value: string) {\n    this.imageViewerBigSrcUrl = value;\n  }\n\n  get highResSrc(): string {\n    return this.imageViewerBigSrcUrl;\n  }\n\n  @Input() set fallbackUrl(src: string) {\n    this.fallback = src;\n  }\n\n  get fallbackUrl(): string {\n    return this.imageCacheConfig.fallbackUrl;\n  }\n\n  //spinnerNameString\n\n  @Input() set spinnerName(text: string) {\n    this.spinnerNameString = text;\n  }\n\n  get spinnerName(): string {\n    return this.imageCacheConfig.spinnerName;\n  }\n\n  @Input() set spinnerColor(text: string) {\n    this.spinnerColorString = text;\n  }\n\n  get spinnerColor(): string {\n    return this.imageCacheConfig.spinnerColor;\n  }\n\n  @Input() set alt(text: string) {\n\n    this.altString = text;\n  }\n\n  get alt(): string {\n    return this.imageCacheConfig.alt;\n  }\n\n  @Input() set showPreview(bool: boolean | string) {\n\n    this.showPrev = (bool == \"true\" || bool == true);\n  }\n\n  get showPreview(): boolean | string {\n    return this.showPrev;\n  }\n\n  @Input() set enableSpinner(bool: boolean | string) {\n\n    this.imageCacheConfig.spinnerEnabled = (bool == \"true\" || bool == true);\n  }\n\n  @Input() set isAvatar(bool: boolean | string) {\n    this.fallback = ((bool == \"true\" || bool == true) ? this.avatarbase64 : this.fallback);\n  }\n\n  get enableSpinner(): boolean | string {\n    return this.imageCacheConfig.spinnerEnabled;\n  }\n\n  @Output() loaded = new EventEmitter();\n  @Output() clicked = new EventEmitter();\n  constructor(\n    imageViewerCtrl: ImageViewerController,\n    private ngZone: NgZone,\n    public platform: Platform,\n    public imageCacheConfig: IonicImageCacheConfig,\n    private helpers: IonicImageCacheHelperProvider\n  ) {\n    this._imageViewerCtrl = imageViewerCtrl;\n  }\n\n  presentImage(event, realImage) {\n    if (this.showPrev == true || this.showPrev == \"true\") {\n\n      //Change this to add high res image\n      let config = { fullResImage: (this.imageViewerBigSrcUrl || this.srcUrl), onCloseCallback: null, enableBackdropDismiss: null };\n      const imageViewer = this._imageViewerCtrl.create(realImage, config);\n      imageViewer.present();\n\n      imageViewer.onDidDismiss((e) => {\n        this.log(e, \"Image viewer closed\");\n      });\n    }\n    this.clicked.emit({ clickReturnObj: this.clickReturnObj });\n  }\n\n  setImageSrc(nativeURL: string = null, entry: FileEntry = null) {\n    let url = entry == null ? nativeURL : entry.nativeURL;\n    if (this.platform.is(\"cordova\")) {\n      if (this.platform.is(\"ios\")) {\n        url = this.helpers.safeiOSNativeURL(url);\n      }\n    }\n\n    this.ngZone.run(() => {\n      this.srcUrl = url;\n      setTimeout(() => {\n        this.loaded.emit(this.srcUrl);\n      }, this.helpers.randomIntFromInterval(300, 700));\n\n    });\n  }\n\n  imageOnLoad() {\n    setTimeout(() => {\n      let realImg: HTMLImageElement = this.realImage.nativeElement;\n      realImg.addEventListener('loaded', (e) => {\n        //this.log(\"image loaddd\");\n        this.loaded.emit(this.srcUrl);\n      }, false);\n    }, 500);\n  }\n\n  saveImageToFilesystem(src: string) {\n    this.log(\"Fetch from server.......\", src);\n\n    this.helpers.downloadImage(src, this.platform, this.cache_directory_name, this.imageCacheConfig.trustAllHosts).then((entry: FileEntry) => {\n      this.setImageSrc(entry.nativeURL, entry);\n      this.log(\"File saved\", entry);\n    }).catch(err => {\n      this.log(\"Failed to saved file to directory\", err);\n      this.setImageSrc(src);\n    })\n  }\n\n  clearAllCache() {\n    if (this.activeDirectory) {\n      this.helpers.clearAllCache(this.cache_directory_name, this.platform).then((removeResult: RemoveResult) => {\n        this.log(removeResult);\n      });\n    }\n  }\n\n  verifyFileAvailability(src: string, dEntry: DirectoryEntry) {\n    this.helpers.getFile(dEntry, this.helpers.extractPath(src), src).then((entry: FileEntry) => {\n      if (entry != null) {\n        this.setImageSrc(null, entry);\n      } else {\n        this.saveImageToFilesystem(src);\n      }\n    })\n  }\n\n  activeDirectory: DirectoryEntry;\n  async initialise(src: string) {\n    await this.helpers.resolveDirectoryUrl(this.cache_directory_name, this.platform).then((dEntry: DirectoryEntry) => {\n      if (dEntry != null) {\n        this.activeDirectory = dEntry;\n        this.log(dEntry);\n\n        this.verifyFileAvailability(src, dEntry);\n      } else {\n        this.saveImageToFilesystem(src);\n      }\n    })\n  }\n\n  log(...args) {\n    if (this.imageCacheConfig.enableDebugMode) {\n      console.log(...args);\n    }\n  }\n}\n"]}